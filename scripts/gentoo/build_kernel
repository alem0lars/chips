ensure_root

kernel_dir = "/usr/src/linux".to_pn
boot_dir   = "/boot".to_pn

[ -> { "make".run dir: kernel_dir, msg: "compiling.." },
  -> { "make".run "modules_install", dir: kernel_dir, msg: "installing kernel modules.." },
  -> { "make".run "install", dir: kernel_dir, msg: "installing kernel image.." },
  -> { "dracut".run "--force", boot_dir.join("initrd-#{uname}"), msg: "generating the initramfs.." }
].do_all


# vim: set filetype=ruby :
